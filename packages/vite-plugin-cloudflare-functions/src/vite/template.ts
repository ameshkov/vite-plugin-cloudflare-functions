export const DtsFilename = 'cloudflare.d.ts';

export function getDefaultTsconfig() {
  const tsconfig = {
    compilerOptions: {
      jsx: 'preserve',
      target: 'ESNext',
      module: 'ESNext',
      moduleResolution: 'Node',
      skipLibCheck: true,
      strict: false,
      allowJs: true,
      noEmit: true,
      resolveJsonModule: true,
      allowSyntheticDefaultImports: true,
      baseUrl: '..',
      paths: {}
    },
    include: ['../**/*']
  };
  return '// Generated by vite-plugin-cloudflare-functions\n' + JSON.stringify(tsconfig, null, 2);
}

export function getDts() {
  return [
    '// Generated by vite-plugin-cloudflare-functions\n',
    `/// <reference types="@cloudflare/workers-types" />`,
    `/// <reference types="vite-plugin-cloudflare-functions/types" />\n`,
    `export {}`
  ].join('\n');
}

export function getFunctionsDts() {
  return [
    '// Generated by vite-plugin-cloudflare-functions\n',
    `/// <reference types="@cloudflare/workers-types" />`,
    `/// <reference types="vite-plugin-cloudflare-functions/types" />\n`,
    `import 'vite-plugin-cloudflare-functions/worker';\n`,
    `declare module 'vite-plugin-cloudflare-functions/worker' {`,
    `  interface PagesFunctionEnv {}\n`,
    `  interface PagesFunctionData {}`,
    `}`
  ].join('\n');
}
